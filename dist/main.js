define((function(){return function(){"use strict";var e={105:function(e,t,a){a.r(t),a.d(t,{amoWidjetSelf:function(){return ya},default:function(){return ka}});var i=a(242),l=a(396);const s={id:"myVue"};function n(e,t,a,i,n,o){const d=(0,l.up)("main-page");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(d)])}var o=a(139);const d=e=>((0,l.dD)("data-v-5aed9c50"),e=e(),(0,l.Cn)(),e),u={class:"app"},r={class:"container"},c=d((()=>(0,l._)("div",{class:"header"},null,-1))),p={class:"content"},_={class:"top"},h={class:"btns"},v=d((()=>(0,l._)("label",{for:"grid"},null,-1))),m=d((()=>(0,l._)("span",{class:"material-icons-outlined",style:{"font-size":"30px"}}," add ",-1))),f=[m],g={key:0,class:"bottom"},w={class:"links"},y=["disabled","onClick"],b={class:"path"},k={class:"categories grid"},x=["onClick"],D={class:"row title"},C=d((()=>(0,l._)("div",{class:"name"},null,-1))),V={class:"value"},q=d((()=>(0,l._)("div",{class:"row"},null,-1))),F={class:"products grid"},I={key:0,class:"text"},E={class:"row title"},O=d((()=>(0,l._)("div",{class:"name"},null,-1))),H={class:"value"},T={class:"rows"},S={class:"row"},j={class:"name font-medium"},Y={class:"value"},z={class:"row ml-1"},U=d((()=>(0,l._)("div",{class:"name"},"НДС :",-1))),P={class:"value"},A={class:"row ml-1"},W=d((()=>(0,l._)("div",{class:"name"},"НДС включен в цену :",-1))),K={class:"value"},M={class:"row"},R={class:"name font-medium"},Z=d((()=>(0,l._)("div",{class:"value"},null,-1))),L={class:"row ml-1"},N=d((()=>(0,l._)("div",{class:"name"},"На складе :",-1))),B={class:"value"},G={class:"row ml-1"},J=d((()=>(0,l._)("div",{class:"name"},"В резерве :",-1))),Q={class:"value"},X={key:3,class:"row"},ee={class:"name"},te={class:"value"},ae={class:"card_footer"},ie={class:"bottom"},le=["onClick"],se=["onClick"],ne=d((()=>(0,l._)("div",{class:"icon"},null,-1))),oe=[ne],de={key:0,class:"rows"},ue={class:"name"},re=["onUpdate:modelValue"],ce=["onUpdate:modelValue"],pe=["onUpdate:modelValue"],_e={key:3,class:"value"},he=d((()=>(0,l._)("div",{class:"footer"},[(0,l._)("button",{class:"btn btn1"},"возврат")],-1))),ve=d((()=>(0,l._)("div",{class:"footer"},null,-1)));function me(e,t,a,s,n,d){const m=(0,l.up)("AppInputSelect"),$=(0,l.up)("filters-modal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",u,[(0,l._)("div",r,[c,(0,l._)("div",p,[(0,l._)("div",_,[(0,l.Wm)(m,{list:n.search.list,value:n.search.value,placeholder:"Добавление (поиск на складе по названию или артикулу)...",onChangeInputValue:d.getProductsAutocomplete},null,8,["list","value","placeholder","onChangeInputValue"]),(0,l._)("div",h,[(0,l.wy)((0,l._)("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>n.show_cards=e),id:"grid"},null,512),[[i.e8,n.show_cards]]),v,(0,l._)("button",{class:"btn",onClick:t[1]||(t[1]=e=>d.openModal())},f)])]),(0,l.Wm)(i.uT,{name:"rows"},{default:(0,l.w5)((()=>[n.show_cards?((0,l.wg)(),(0,l.iD)("div",g,[(0,l._)("div",w,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.selectedCategories,((e,t)=>((0,l.wg)(),(0,l.iD)("button",{class:(0,o.C_)(["triangle",{triangle_last:!d.categories.length&&n.selectedCategories.length-1==t}]),disabled:!d.categories.length&&n.selectedCategories.length-1==t,key:e,onClick:t=>d.selectCategories(e)},(0,o.zw)(e.name),11,y)))),128))]),(0,l._)("div",b,[(0,l._)("div",k,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.categories,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"card",key:e,onClick:t=>d.selectCategories(e)},[(0,l._)("div",D,[C,(0,l._)("div",V,(0,o.zw)(e.name),1)]),q],8,x)))),128))])]),(0,l._)("div",F,[0==d.products.length?((0,l.wg)(),(0,l.iD)("label",I," Ничего не найдено ")):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.products,(a=>((0,l.wg)(),(0,l.iD)("div",{class:"card",key:a},[(0,l._)("div",E,[O,(0,l._)("div",H,(0,o.zw)(a?.fields?.name),1)]),(0,l._)("div",T,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.sortedFields,(e=>((0,l.wg)(),(0,l.iD)(l.HY,{key:e},[11===e.type?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",S,[(0,l._)("div",j,(0,o.zw)(e.name)+" :",1),(0,l._)("div",Y,(0,o.zw)(a?.fields[e.code]?.cost+" "+a?.fields[e.code]?.currency),1)]),a?.fields[e.code]?.is_nds?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",z,[U,(0,l._)("div",P,(0,o.zw)(a?.fields[e.code]?.nds),1)]),(0,l._)("div",A,[W,(0,l._)("div",K,(0,o.zw)(a?.fields[e.code]?.is_price_include_nds?"Да":"Нет"),1)])],64)):(0,l.kq)("",!0)],64)):13===e.type?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l._)("div",M,[(0,l._)("div",R,(0,o.zw)(e.name)+" :",1),Z]),(0,l._)("div",L,[N,(0,l._)("div",B,(0,o.zw)(a?.fields[e.code]?.count),1)]),(0,l._)("div",G,[J,(0,l._)("div",Q,(0,o.zw)(a?.fields[e.code]?.reserve),1)])],64)):"name"===e.code?((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[],64)):((0,l.wg)(),(0,l.iD)("div",X,[(0,l._)("div",ee,(0,o.zw)(e.name)+" :",1),(0,l._)("div",te,(0,o.zw)(a?.fields[e.code]),1)]))],64)))),128))]),(0,l._)("div",ae,[(0,l._)("button",{class:"btn btn_del",onClick:t[2]||(t[2]=t=>d.update_changeValue([e.row],[1]))}," Добавить к сделке ")])])))),128))])])):(0,l.kq)("",!0)])),_:1}),(0,l._)("div",ie,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.rows,((t,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"row",key:t},[(0,l._)("div",{class:"row_title",onClick:e=>d.toggleShowData(a)},[(0,l._)("label",null,(0,o.zw)(t),1),(0,l._)("button",{class:"btn",onClick:e=>d.handleDeleteItem(t,a)},oe,8,se)],8,le),(0,l.Wm)(i.uT,{name:"rows"},{default:(0,l.w5)((()=>[e.show_data[a]?((0,l.wg)(),(0,l.iD)("div",de,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.fields,((s,n)=>((0,l.wg)(),(0,l.iD)("div",{class:"row",key:s},[(0,l._)("div",ue,(0,o.zw)(s.name),1),0==n?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:0,class:"input",type:"number","onUpdate:modelValue":t=>e.countes[a].count=t},null,8,re)),[[i.nr,e.countes[a].count]]):1==n?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:1,class:"input","onUpdate:modelValue":t=>e.countes[a].company=t},null,8,ce)),[[i.nr,e.countes[a].company]]):s.change?(0,l.wy)(((0,l.wg)(),(0,l.iD)("input",{key:2,class:"input","onUpdate:modelValue":t=>e.rows[a][d.search_idx(s.name)]=t},null,8,pe)),[[i.nr,e.rows[a][d.search_idx(s.name)]]]):((0,l.wg)(),(0,l.iD)("div",_e,(0,o.zw)(d.search_value(s.name,t)),1))])))),128)),he])):(0,l.kq)("",!0)])),_:2},1024)])))),128))])]),ve])]),((0,l.wg)(),(0,l.j4)(l.lR,{to:"body"},[(0,l.Wm)(i.uT,{name:"rows"},{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)(l.Ob,null,[n.show_filters?((0,l.wg)(),(0,l.j4)($,{key:0,onClose:d.close_filters,onUpdate_changeValue:d.update_changeValue},null,8,["onClose","onUpdate_changeValue"])):(0,l.kq)("",!0)],1024))])),_:1})]))],64)}var fe=a(65);const ge=e=>((0,l.dD)("data-v-d422c98c"),e=e(),(0,l.Cn)(),e),we={class:"input-select"},ye=["placeholder"],be={key:0,class:"list"},ke=["onClick"],xe={key:0,class:"placeholder"},De=ge((()=>(0,l._)("div",null,[(0,l._)("div",{class:"title"}),(0,l._)("div",{class:"text"})],-1))),Ce=ge((()=>(0,l._)("div",{class:"aside"},null,-1))),Ve=[De,Ce];function qe(e,t,a,s,n,d){return(0,l.wg)(),(0,l.iD)("div",we,[(0,l.wy)((0,l._)("input",{type:"text",class:(0,o.C_)(["input",{input_uderline:a.input_uderline,black_text:a.SelectedInTitle&&a.selected?.name}]),"onUpdate:modelValue":t[0]||(t[0]=e=>s.inputValue=e),onClick:t[1]||(t[1]=e=>s.openList()),placeholder:a.SelectedInTitle&&a.selected?.name?a.selected?.name:a.placeholder},null,10,ye),[[i.nr,s.inputValue]]),s.showList?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",{class:"backdrop",onClick:t[2]||(t[2]=e=>s.closeList())}),(0,l.Wm)(i.W3,{name:"list"},{default:(0,l.w5)((()=>[a.list.length?((0,l.wg)(),(0,l.iD)("ul",be,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.list,(e=>((0,l.wg)(),(0,l.iD)("li",{class:(0,o.C_)(["item",{selected:e.value===a.selected?.value}]),key:e.value,onClick:t=>s.selectItem(e)},(0,o.zw)(e.name),11,ke)))),128))])):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[s.showPlaceholder?((0,l.wg)(),(0,l.iD)("div",xe,[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(4,(e=>(0,l._)("div",{class:"item",key:e},Ve))),64))])):(0,l.kq)("",!0)],64))])),_:1})],64)):(0,l.kq)("",!0)])}var Fe=a(870),Ie={props:{list:Array,selected:{type:Object,required:!1},countLettersReq:{type:Number,required:!1,default:()=>0},requestDelay:{type:Number,required:!1,default:()=>300},placeholder:{type:String,required:!1},input_uderline:{type:Boolean,required:!1,default:()=>!1},SelectedInTitle:{type:Boolean,required:!1,default:()=>!1}},emits:["changeInputValue","focusIn","select"],setup(e,t){const a=(0,Fe.iH)(""),i=(0,Fe.iH)(null),s=(0,Fe.iH)(!1),n=()=>{s.value=!1,clearTimeout(i.value),a.value.length>=e.countLettersReq&&(s.value=!0,i.value=setTimeout((()=>{t.emit("changeInputValue",a.value),setTimeout((()=>s.value=!1),3*e.requestDelay)}),e.requestDelay))};(0,l.YP)(a,(()=>n()));const o=(0,Fe.iH)(!1),d=()=>o.value=!1,u=()=>(o.value=!0,r(),n()),r=()=>t.emit("focusIn"),c=e=>{t.emit("select",e),d(),a.value=""};return{inputValue:a,showList:o,closeList:d,openList:u,selectItem:c,showPlaceholder:s}}},Ee=a(89);const Oe=(0,Ee.Z)(Ie,[["render",qe],["__scopeId","data-v-d422c98c"]]);var He=Oe;const Te=e=>((0,l.dD)("data-v-50e3d268"),e=e(),(0,l.Cn)(),e),Se={class:"app_modal"},je={class:"container"},Ye={class:"header"},ze=Te((()=>(0,l._)("label",null,"Filters Modal",-1))),Ue=Te((()=>(0,l._)("div",{class:"icon"},null,-1))),Pe=[Ue],Ae={class:"content"},We={class:"accept_btn"},Ke={class:"footer"},$e={class:"btns"};function Me(e,t,a,i,s,n){const o=(0,l.up)("filters-list"),d=(0,l.up)("main-grid");return(0,l.wg)(),(0,l.iD)("div",Se,[(0,l._)("div",je,[(0,l._)("div",Ye,[ze,(0,l._)("button",{class:"exit",onClick:t[0]||(t[0]=e=>i.close())},Pe)]),(0,l._)("div",Ae,[((0,l.wg)(),(0,l.j4)(l.Ob,null,[(0,l.Wm)(o,{show_filters:e.show_filters,dont_show_filters:e.dont_show_filters,onUpdateFiltersValue:i.updateFiltersValue,onAdd_filter:e.add_filter},null,8,["show_filters","dont_show_filters","onUpdateFiltersValue","onAdd_filter"])],1024)),(0,l._)("div",We,[(0,l._)("button",{onClick:t[1]||(t[1]=t=>e.clean_filters()),class:"btn1 btn"},"Очистить"),(0,l._)("button",{onClick:t[2]||(t[2]=e=>i.feelFilters()),class:"btn2 btn"},"Применить")]),(0,l.Wm)(d,{class:"main_grid",data:i.data,collval:i.collval,onUpdate_changeValue:e.update_changeValue,onAccept:i.accept,onUpdate_countes:i.update_countes},null,8,["data","collval","onUpdate_changeValue","onAccept","onUpdate_countes"])]),(0,l._)("div",Ke,[(0,l._)("div",$e,[(0,l._)("button",{class:"btn btn1",onClick:t[3]||(t[3]=e=>i.close())},"Назад")])])])])}const Re={class:"filters"},Ze={class:"item"},Le={class:"title"};function Ne(e,t,a,s,n,d){const u=(0,l.up)("selector-vue"),r=(0,l.up)("filter-number"),c=(0,l.up)("filter-text"),p=(0,l.up)("filter-list"),_=(0,l.up)("filter-date"),h=(0,l.up)("filter-flag");return(0,l.wg)(),(0,l.j4)(i.W3,{name:"mdl"},{default:(0,l.w5)((()=>[(0,l._)("div",Re,[(0,l._)("div",Ze,[(0,l.Wm)(u,{options_props:n.dont_show_filters,selected_option:{name:"Добавить фильтр"},onSelect:d.add_filter},null,8,["options_props","onSelect"])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.filtersValue,((t,s)=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",{class:"item",key:s},[(0,l._)("div",Le,(0,o.zw)(e.params[s+1]),1),1==t.type||2==t.type?((0,l.wg)(),(0,l.j4)(r,{key:0,item:t,idx:s,onChange_filter_value:d.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,l.kq)("",!0),3==t.type||4==t.type?((0,l.wg)(),(0,l.j4)(c,{key:1,item:t,idx:s,onChange_filter_value:d.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,l.kq)("",!0),5==t.type||6==t.type?((0,l.wg)(),(0,l.j4)(p,{key:2,item:t,idx:s,selector_options:t.selector_options,onChange_filter_value:d.change_filter_value},null,8,["item","idx","selector_options","onChange_filter_value"])):(0,l.kq)("",!0),7==t.type||8==t.type?((0,l.wg)(),(0,l.j4)(_,{key:3,item:t,idx:s,onChange_filter_value:d.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,l.kq)("",!0),9==t.type?((0,l.wg)(),(0,l.j4)(h,{key:4,item:t,idx:s,onChange_filter_value:d.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,l.kq)("",!0)])),[[i.F8,a.show_filters[s]]]))),128))])])),_:1})}const Be={class:"v-select"},Ge={class:"options",key:"a1"},Je=["onClick"];function Qe(e,t,a,s,n,d){return(0,l.wg)(),(0,l.iD)("div",Be,[(0,l._)("div",{class:(0,o.C_)(["title",{title_checked:s.show_options,disabled:a.disabled}]),onClick:t[0]||(t[0]=e=>s.open_close_options()),onFocusout:t[1]||(t[1]=(...e)=>s.handleFocusOut&&s.handleFocusOut(...e)),tabindex:"0"},[(0,l._)("p",null,(0,o.zw)(a.selected_option.name),1),a.disabled?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,o.C_)(["arrow",{rotate_arrow:s.show_options}])},null,2))],34),(0,l.Wm)(i.uT,{name:"list"},{default:(0,l.w5)((()=>[s.show_options?((0,l.wg)(),(0,l.iD)("div",Ge,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.options,(e=>((0,l.wg)(),(0,l.iD)("p",{key:e.value,onClick:t=>s.select_option(e)},(0,o.zw)(e.name),9,Je)))),128))])):(0,l.kq)("",!0)])),_:1})])}var Xe={props:{options_props:{type:Array,default(){return[]},required:!0},selected_option:{type:Object,required:!0,default(){return{}}},disabled:{type:Boolean,required:!1,default:!1},idx:{type:Number,required:!1}},emits:{select:null},setup(e,{emit:t}){const a=(0,Fe.iH)([]);(0,l.bv)((()=>{(0,l.Y3)((()=>{i()}))}));const i=()=>{a.value=[],e.options_props.forEach((e=>a.value.push(e)))};(0,l.YP)((()=>e.options_props),(()=>{i()}),{deep:!0});const s=(0,Fe.iH)(!1),n=()=>{s.value=!1},o=()=>{e.disabled||(s.value=!s.value)},d=()=>{n()},u=a=>{t("select",a,e.idx),n()};return{open_close_options:o,handleFocusOut:d,show_options:s,options:a,select_option:u}}};const et=(0,Ee.Z)(Xe,[["render",Qe],["__scopeId","data-v-64812f98"]]);var tt=et;const at={class:"filter"};function it(e,t,a,s,n,d){return(0,l.wg)(),(0,l.iD)("div",at,[(0,l._)("button",{onClick:t[0]||(t[0]=e=>5==n.option?n.option=1:n.option+=1)},[(0,l._)("div",{class:(0,o.C_)(["icon",{equal:1==n.option,more:2==n.option,more_or_equal:3==n.option,less:4==n.option,less_or_equal:5==n.option}])},null,2)]),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.filterValue=e),type:"number"},null,512),[[i.nr,n.filterValue]])])}var lt={props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{option:1,filterValue:null}},computed:{option_value(){return{option:this.option,value:this.filterValue}}},watch:{option_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,l.Y3)((()=>{this.option=this.item.option,this.filterValue=this.item.value}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)}}};const st=(0,Ee.Z)(lt,[["render",it],["__scopeId","data-v-74292d04"]]);var nt=st;const ot={class:"filter"};function dt(e,t,a,s,n,d){return(0,l.wg)(),(0,l.iD)("div",ot,[(0,l._)("button",{onClick:t[0]||(t[0]=e=>2==n.option?n.option=1:n.option+=1)},[(0,l._)("div",{class:(0,o.C_)(["icon",{equal:1==n.option,tilde:2==n.option}])},null,2)]),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.filterValue=e),type:"text"},null,512),[[i.nr,n.filterValue]])])}var ut={props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{option:1,filterValue:null}},computed:{option_value(){return{option:this.option,value:this.filterValue}}},watch:{option_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,l.Y3)((()=>{this.option=this.item.option,this.filterValue=this.item.value}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)}}};const rt=(0,Ee.Z)(ut,[["render",dt],["__scopeId","data-v-530d9d52"]]);var ct=rt;const pt={class:"filter"};function _t(e,t,a,i,s,n){const d=(0,l.up)("multi-selector");return(0,l.wg)(),(0,l.iD)("div",pt,[(0,l._)("button",{onClick:t[0]||(t[0]=e=>n.open_selector())},[(0,l._)("div",{class:(0,o.C_)(["arrow",{rotate_arrow:s.show_selector}])},null,2)]),s.show_selector?((0,l.wg)(),(0,l.j4)(d,{key:0,class:"selector",id:"selector123",options_props:a.selector_options,onSelect:n.option_select_multi,selected_options:s.filterValue,onFocusout:n.handleFocusOut,tabindex:"1"},null,8,["options_props","onSelect","selected_options","onFocusout"])):(0,l.kq)("",!0)])}const ht={class:"multi_selector"},vt=["onClick"];function mt(e,t,a,i,s,n){return(0,l.wg)(),(0,l.iD)("div",ht,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.options_props,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:(0,o.C_)(["item",{selected:a.selected_options[t]}]),key:e.value,onClick:e=>i.select(t)},(0,o.zw)(e.name),11,vt)))),128))])}var ft={name:"MultiSelector",props:{options_props:{type:Array,required:!0,default(){return[]}},selected_options:{type:Array,required:!0,default(){return[!0]}}},emits:{select:null},setup(e,{emit:t}){let a=(0,Fe.qj)([]);(0,l.bv)((()=>e.selected_options.forEach((e=>a.push(e)))));const i=e=>{0==e&&(a=(0,Fe.qj)([])),1==a[0]&&(a[0]=!1),a[e]=!a[e],a.includes(!0)||(a[0]=!0),t("select",a)};return{options_value:a,select:i}}};const gt=(0,Ee.Z)(ft,[["render",mt],["__scopeId","data-v-6d2d0cf0"]]);var wt=gt,yt={components:{MultiSelector:wt},props:{item:{type:Object,required:!0},idx:{type:Number,required:!0},selector_options:{type:Array,required:!0}},data(){return{filterValue:[],show_selector:!1}},computed:{option_value(){return{value:this.filterValue}}},watch:{option_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,l.Y3)((()=>{this.filterValue=[],this.item.value.forEach(((e,t)=>{this.filterValue[t]=e}))}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)},option_select_multi(e){this.filterValue=e},open_selector(){this.show_selector=!0,(0,l.Y3)((()=>{this.show_selector&&document.getElementById("selector123").focus()}))},handleFocusOut(){setTimeout((()=>{(0,l.Y3)((()=>{this.show_selector=!1}))}),150)}}};const bt=(0,Ee.Z)(yt,[["render",_t],["__scopeId","data-v-42d70668"]]);var kt=bt;const xt={key:0,class:"filter"},Dt={key:1,class:"filter"};function Ct(e,t,a,s,n,o){return(0,l.wg)(),(0,l.iD)(l.HY,null,[7==a.item.type?((0,l.wg)(),(0,l.iD)("div",xt,[(0,l.wy)((0,l._)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>n.date_start=e)},null,512),[[i.nr,n.date_start]]),(0,l.wy)((0,l._)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>n.date_end=e)},null,512),[[i.nr,n.date_end]])])):(0,l.kq)("",!0),8==a.item.type?((0,l.wg)(),(0,l.iD)("div",Dt,[(0,l.wy)((0,l._)("input",{type:"datetime-local","onUpdate:modelValue":t[2]||(t[2]=e=>n.date_start=e)},null,512),[[i.nr,n.date_start]]),(0,l.wy)((0,l._)("input",{type:"datetime-local","onUpdate:modelValue":t[3]||(t[3]=e=>n.date_end=e)},null,512),[[i.nr,n.date_end]])])):(0,l.kq)("",!0)],64)}var Vt={props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{date_start:"",date_end:""}},computed:{date(){return{value:this.date_start+"~"+this.date_end}}},watch:{date:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},emits:{change_filter_value:null},methods:{change_value(){(0,l.Y3)((()=>{if(null!=this.item.value){const e=this.item.value.split("~");this.date_start=e[0],this.date_end=e[1]}}))},emit_value(){this.$emit("change_filter_value",this.date,this.idx)}}};const qt=(0,Ee.Z)(Vt,[["render",Ct],["__scopeId","data-v-5332f71a"]]);var Ft=qt;const It={class:"filter"};function Et(e,t,a,i,s,n){const o=(0,l.up)("selector-vue");return(0,l.wg)(),(0,l.iD)("div",It,[(0,l.Wm)(o,{options_props:s.options,onSelect:n.option_select,selected_option:s.options[s.filterValue-1]},null,8,["options_props","onSelect","selected_option"])])}var Ot={components:{SelectorVue:tt},props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{options:[{name:"Все",value:1},{name:"Да",value:2},{name:"Нет",value:3}],filterValue:1}},computed:{option_value(){return{value:this.filterValue}}},watch:{option_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,l.Y3)((()=>{this.filterValue=this.item.value}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)},option_select(e){this.filterValue=e.value}}};const Ht=(0,Ee.Z)(Ot,[["render",Et],["__scopeId","data-v-12148177"]]);var Tt=Ht,St={components:{SelectorVue:tt,FilterNumber:nt,FilterText:ct,FilterList:kt,FilterDate:Ft,FilterFlag:Tt},props:{show_filters:{type:Array,required:!0,default(){return[]}}},emits:{updateFiltersValue:null,add_filter:null},data(){return{filtersValue:[],dont_show_filters:[]}},computed:{...(0,fe.Se)(["fields","params"])},mounted(){this.feelFilters(),this.feelParams()},watch:{filtersValue:{handler:function(){this.$emit("updateFiltersValue",this.filtersValue)},deep:!0},show_filters:{handler:function(){this.feelParams()},deep:!0}},methods:{feelParams(){let e=[];this.params.forEach(((t,a)=>{if(!0!==this.show_filters[a-1]&&0!=a&&a!=this.params.length-1){const i={name:t,value:a};e.push(i)}})),this.dont_show_filters=e},add_filter(e){this.dont_show_filters.splice(this.dont_show_filters.indexOf(e.name),1),this.$emit("add_filter",e)},change_filter_value(e,t){Object.assign(this.filtersValue[t],e)},feelFilters(){this.params.forEach(((e,t)=>{if(0!=t&&t!=this.params.length-1){let t=null,a=[];this.fields.forEach((i=>i.field==e?(t=i.type.value,a=i.selector_options):null));let i=null;5!=t&&6!=t||(i=[!0]),9==t&&(i=1);const l={type:t,option:1,selector_options:a,value:i};this.filtersValue.push(l)}}))}}};const jt=(0,Ee.Z)(St,[["render",Ne],["__scopeId","data-v-000e887a"]]);var Yt=jt;const zt={class:"wrapper"},Ut={key:0,class:"text"},Pt={class:"bar_row"},At={class:"bar_item_group"},Wt={class:"item"},Kt={key:0,class:"modal_form"},$t=["onUpdate:modelValue"],Mt={class:"dublitem"},Rt=["onClick"],Zt=["onClick"],Lt={class:"left"},Nt={class:"span"},Bt={class:"right"};function Gt(e,t,a,s,n,d){const u=(0,l.up)("selector-vue");return(0,l.wg)(),(0,l.iD)("div",zt,[0==d.paginatedData.length?((0,l.wg)(),(0,l.iD)("label",Ut," Ничего не найдено ")):(0,l.kq)("",!0),0!=d.paginatedData.length?((0,l.wg)(),(0,l.iD)("table",{class:(0,o.C_)(["table",{blur:e.show_edit_modal}]),key:n.updateKey},[(0,l._)("thead",null,[(0,l._)("tr",Pt,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.params,((t,s)=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("th",{class:"bar_item item",style:(0,o.j5)({minWidth:0===s?"17px":s===e.params.length-1?"20px":0!=d.width[s]?d.width[s]+"px":(d.collsCount>=8?100:d.collsCount>3?90:80)/d.collsCount+"%"}),key:t},[(0,l._)("div",At,[(0,l._)("div",null,(0,o.zw)(t),1)])],4)),[[i.F8,!1!==a.collval[s-1]&&s!=e.params.length-1]]))),128))])]),(0,l._)("tbody",null,[(0,l.Wm)(i.W3,{name:"rows"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.paginatedData,((t,s)=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("tr",{class:"row",key:t},[(0,l._)("td",Wt,[n.duplicate[s+n.idxes[n.page-1][0]]||!n.duplicate[s+n.idxes[n.page-1][0]+1]?((0,l.wg)(),(0,l.iD)("div",Kt,[(0,l.wy)((0,l._)("input",{type:"number",class:"input","onUpdate:modelValue":e=>n.countes[s]=e},null,8,$t),[[i.nr,n.countes[s]]])])):(0,l.kq)("",!0)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Object.entries(t),((t,u)=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("td",{class:(0,o.C_)([{open_dublitem:n.duplicate[s+n.idxes[n.page-1][0]]},"item"]),key:t},[(0,l._)("div",Mt,[(0,l.Uk)((0,o.zw)(t[1])+" ",1),u==e.params.indexOf("Название")-1&&n.showduplicate[s+n.idxes[n.page-1][0]+1]&&!n.duplicate[s+n.idxes[n.page-1][0]]?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:e=>d.showduble(s+n.idxes[n.page-1][0]),class:"buttonDuwn btn"},null,8,Rt)):(0,l.kq)("",!0),u!=e.params.indexOf("Название")-1||n.showduplicate[s+n.idxes[n.page-1][0]+1]||n.duplicate[s+n.idxes[n.page-1][0]]||!n.duplicate[s+n.idxes[n.page-1][0]+1]?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("button",{key:1,onClick:e=>d.hideduble(s+n.idxes[n.page-1][0]),class:"buttonUp btn"},null,8,Zt))])],2)),[[i.F8,!1!==a.collval[u]]]))),128))])),[[i.F8,!n.showduplicate[s+n.idxes[n.page-1][0]]]]))),128))])),_:1})])],2)):(0,l.kq)("",!0),0!=d.paginatedData.length?((0,l.wg)(),(0,l.iD)("div",{key:2,class:(0,o.C_)(["bottom",{blur:e.show_edit_modal}])},[(0,l._)("div",Lt,[n.page>1?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:t[0]||(t[0]=e=>n.page-=1),class:"btn previous"},(0,o.zw)("<"))):(0,l.kq)("",!0),(0,l._)("div",Nt,(0,o.zw)(n.page),1),n.page*n.count<a.data.length-d.countHideRows?((0,l.wg)(),(0,l.iD)("button",{key:1,onClick:t[1]||(t[1]=e=>n.page+=1),class:"btn next"},(0,o.zw)(">"))):(0,l.kq)("",!0),(0,l.Wm)(u,{class:"count",options_props:n.count_values,selected_option:{name:n.count,value:Math.random()},onSelect:d.change_count},null,8,["options_props","selected_option","onSelect"])]),(0,l._)("div",Bt,[(0,l._)("button",{class:"btn btn2",onClick:t[2]||(t[2]=e=>d.accept())},"Добавить к сделке")])],2)):(0,l.kq)("",!0)])}var Jt={name:"MainGrid",components:{SelectorVue:tt},props:{data:{type:Array,required:!0},collval:{type:Array,required:!0}},emits:{accept:null,update_countes:null},data(){return{count:5,count_values:[{name:"3",value:1},{name:"5",value:2},{name:"10",value:3},{name:"20",value:4}],page:1,filtersValue:[],updateKey:0,duplicate:[],showduplicate:[],startIdx:0,idxes:[[0,6]],countes:[]}},watch:{count(){this.startIdx=0,this.feelIdxes(),this.page=1},paginatedData:{handler:function(){this.updateKey+=1,this.countes=[]},deep:!0},countes:{handler:function(){this.$emit("update_countes",this.countes)},deep:!0},data:{handler:function(){this.calcDuplicate()},deep:!0},countHideRows:function(){this.feelIdxes()}},computed:{paginatedData(){if(void 0!=this.idxes[this.page-1]){const e=this.data.slice(this.idxes[this.page-1][0],this.idxes[this.page-1][1]);return e}return[]},collsCount(){let e=0;return this.collval.forEach((t=>t?e+=1:null)),e},countPage(){return this.count*(this.page-1)},countHideRows(){let e=0;return this.duplicate.forEach((t=>t?e+=1:null)),e},endidx(){return this.endId(this.startIdx)},width(){let e=[];return this.params.forEach((t=>{let a=0;this.fields.forEach((e=>{t===e.field&&(9==e.type.value&&(a=70),7!=e.type.value&&8!=e.type.value||(a=130))})),e.push(a)})),e},...(0,fe.Se)(["fields"]),...(0,fe.Se)(["data1"]),...(0,fe.Se)(["params"])},mounted(){this.calcDuplicate(),this.feelIdxes()},deactivated(){this.countes=[]},methods:{change_count(e){this.count=e.name},accept(){this.$emit("accept")},calcDuplicate(){let e="",t="";this.duplicate=[],this.showduplicate=[];const a=this.params.indexOf("Название")-1,i=this.params.indexOf("Артикул")-1;this.data.forEach((l=>{l[a]==e&&l[i]==t?this.duplicate.push(!0):this.duplicate.push(!1),e=l[a],t=l[i]})),this.duplicate.forEach((e=>this.showduplicate.push(e)))},showduble(e){while(this.duplicate[e+1])this.showduplicate[e+1]=!1,e+=1},hideduble(e){while(this.duplicate[e+1])this.showduplicate[e+1]=!0,e+=1},endId(e){let t=0;while(t!=this.count)this.duplicate[e]||(t+=1),e+=1;while(this.duplicate[e])e+=1;return e},feelIdxes(){this.idxes=[];while(this.startIdx<this.data.length)this.idxes.push([this.startIdx,this.endId(this.startIdx)]),this.startIdx=this.endId(this.startIdx);this.startIdx=0}}};const Qt=(0,Ee.Z)(Jt,[["render",Gt],["__scopeId","data-v-0bc0d8a6"]]);var Xt=Qt;function ea(){const e=(0,fe.oR)(),t=(0,l.Fl)((()=>e.getters.params)),a=(0,Fe.iH)([]);return t.value.forEach((e=>{a.value.push(e)})),a.value.pop(),a.value.shift(),{params:a}}function ta(){const{params:e}=ea(),t=(0,Fe.iH)([!0,!0,!0,!0,!0]),a=a=>{t.value[e.value.indexOf(a.name)]=!0},i=()=>t.value=[!0,!0,!0,!0,!0],l=(0,Fe.iH)([]),s=e=>{l.value=e},n=(e,t,a)=>{const i=[];return e.forEach((e=>{e[a].split(" ").forEach((a=>{a.includes(t)&&i.push(e)}))})),i},o=(e,t,a)=>{const i=[];return e.forEach((e=>{e[a]==t&&i.push(e)})),i};return{show_filters:t,add_filter:a,filtersValue:l,updateFiltersValue:s,includes:n,eqval:o,clean_filters:i}}var aa={components:{FiltersList:Yt,MainGrid:Xt},emits:{close:null,update_changeValue:null},setup(e,{emit:t}){const{filtersValue:a,eqval:i,includes:s,updateFiltersValue:n}=ta(),o=(0,fe.oR)(),d=()=>{t("close")},u=()=>{let e=[],a=[];f.value.forEach(((t,i)=>{void 0!=t&&""!=t&&(e.push(_.value[i]),a.push(f.value[i]))})),t("update_changeValue",e,a),d()},r=(0,l.Fl)((()=>o.getters.data)),c=(0,l.Fl)((()=>o.getters.service));let p=[];c.value.forEach((e=>p.push(e))),r.value.forEach((e=>p.push(e)));const _=(0,Fe.iH)(p),h=()=>{_.value=[],p.forEach((e=>{_.value.push((0,Fe.qj)(e))}))};_.value=_.value.sort(((e,t)=>e[0].localeCompare(t[0])));const v=[!0,!0,!1,!0,!1,!0,!0,!0,!0,!0,!1,!1,!0,!0,!1,!1,!1,!1,!1],m=()=>{h();const e=[0,1];e.forEach((e=>{if(""!=a.value[e].value&&null!=a.value[e].value&&void 0!=a.value[e].value){const t=[];_.value.forEach((e=>t.push(e))),_.value=[],1==a.value[e].option&&i(t,a.value[e].value,e).forEach((e=>_.value.push(e))),2==a.value[e].option&&s(t,a.value[e].value,e).forEach((e=>_.value.push(e)))}}))},f=(0,Fe.iH)([]),g=e=>f.value=e;return{...ta(),updateFiltersValue:n,close:d,accept:u,data:_,collval:v,feelFilters:m,update_countes:g}}};const ia=(0,Ee.Z)(aa,[["render",Me],["__scopeId","data-v-50e3d268"]]);var la=ia,sa={components:{AppInputSelect:He,FiltersModal:la},data(){return{show_cards:!0,show_filters:!1,selectedCategories:[],search:{value:"",list:[]}}},computed:{...(0,fe.Se)(["data","params"]),categories(){return this.$store.state.categories.categories},products(){return this.$store.state.products.products},fields(){return this.$store.state.fields.fields},sortedFields(){return this.fields?.filter((e=>e.lead_config?.visible>0))}},async mounted(){await this.getCategories(0),this.selectCategories(this.categories[0])},watch:{show_cards(){this.show_cards||(this.selected_categories=[],this.sel_idx=0)}},methods:{async getProductsAutocomplete(e){this.search.value=e;const t=await this.$store.dispatch("getProductsAutocomplete",{account_id:30214471,q:e});t.map((e=>e.name=e.label)),this.search.list=t},selectCategories(e){const t=this.selectedCategories?.indexOf(e);-1!==t&&this.selectedCategories.splice(t,9999),this.selectedCategories.push(e),this.getCategories(e.id),this.getProducts(e.id),this.getFields(e.id)},async getCategories(e){await this.$store.dispatch("getCategories",{account_id:30214471,parent_id:e})},async getProducts(e){await this.$store.dispatch("getProducts",{account_id:30214471,category_id:e})},async getFields(e){await this.$store.dispatch("getFields",{account_id:30214471,category_id:e,with_parents:1})},handleDeleteItem(e,t){const a={name:this.short_value(e),data:e,value:Math.random()};this.available_data.push(a),this.rows.splice(t,1),this.countes.splice(t,1)},update_changeValue(e,t){e.forEach(((e,a)=>{if(!this.rows.includes(e)){let i=[];e.forEach((e=>i.push(e))),this.rows.push(i);let l=null;l=void 0==t[a]?0:t[a];const s={count:l,company:""};this.countes.push(s)}}))},close_filters(){this.show_filters=!1},select(e){this.available_data.forEach(((t,a)=>{t.data==e.data&&this.available_data.splice(a,1)})),this.rows.push(e.data);const t={count:1,company:""};this.countes.push(t)},feel_available_data(){this.data.forEach(((e,t)=>{const a={name:this.short_value(e),data:e,value:t};this.available_data.push(a)}))},search_value(e,t){const a=this.search_idx(e);if(-2!=a)return t[a]},search_idx(e){const t=this.params.indexOf(e)-1;return t},toggleShowData(e){const t=this.show_data[e];this.show_data=[],this.show_data[e]=!t},openModal(){return this.show_filters=!0,!1}}};const na=(0,Ee.Z)(sa,[["render",me],["__scopeId","data-v-5aed9c50"]]);var oa=na,da={name:"App",components:{MainPage:oa},setup(){}};const ua=(0,Ee.Z)(da,[["render",n]]);var ra=ua,ca={state:{params:["","Название","Артикул","Себестоимость","Цена","Склад","На складе","Свободно для резерва","В резерве","№ партии","Поступление","НДС","Изменение","Единицы измерений","НДС %","НДС включен в цену","Менеджер может менять % НДС","Описание","Прибыль","Группа",""],data:[["Товар 1","1","500","509","Склад 1","509","50","51","1","2022-07-13","Да","2022-07-18T11:21","шт","3","Да","Да","123","Да","Группа 1"],["Товар 1","1","120","129","Склад 1","129","12","11","2","2022-07-13","Да","2022-07-18T11:21","шт","3","Нет","Да","123","Да","Группа 1"],["Товар 1","1","300","309","Склад 1","309","30","31","2","2022-07-13","Да","2022-07-18T11:21","шт","3","Нет","Да","123","Да","Группа 1"],["Товар 1","1","1500","1509","Склад 1","1509","150","151","3","2022-07-13","Да","2022-07-18T11:21","шт","3","Да","Да","123","Да","Группа 1"],["Товар 2","2","1800","1809","Склад 1","1809","180","181","1","2022-07-14","Да","2022-07-18T11:21","шт","3","Нет","Да","123","Да","Группа 1"],["Товар 3","3","13","19","Склад 1","19","1","1","2","2022-07-18","Да","2022-07-18T11:21","шт","3","Нет","Да","123","Да","Группа 1"],["Товар 4","4","117","119","Склад 1","119","11","11","3","2022-07-13","Да","2022-07-18T11:21","шт","3","Нет","Да","123","Да","Группа 1"],["Товар 5","5","4356","4359","Склад 2","4359","435","431","2","2022-07-18","Да","2022-07-18T11:21","шт","3","Да","Да","123","Да","Группа 2"],["Товар 6","6","67589","67589","Склад 2","67589","6758","6751","2","2022-07-11","Да","2022-07-18T11:21","шт","3","Нет","Да","123","Да","Группа 2"],["Товар 7","7","123","129","Склад 2","129","12","11","1","2022-07-11","Да","2022-07-18T11:21","шт","3","Нет","Да","123","Да","Группа 2"],["Товар 8","8","123","129","Склад 2","129","12","11","1","2022-07-18","Да","2022-07-18T11:21","шт","3","Нет","Да","123","Да","Группа 2"],["Товар 9","9","123","129","Склад 2","129","12","11","2","2022-07-11","Да","2022-07-18T11:21","шт","3","Нет","Да","123","Да","Группа 2"],["Товар 9","9","123","129","Склад 2","129","12","11","3","2022-07-28","Да","2022-07-18T11:21","шт","3","Да","Да","123","Да","Группа 2"],["Товар 10","10","123","129","Склад 2","129","12","11","3","2022-07-16","Да","2022-07-18T11:21","шт","3","Нет","Да","123","Да","Группа 2"]],service:[["Услуга 1","1","1500","1509","","","","","","2022-07-18","Да","2022-07-18T11:21","","3","Нет","Да","123","Да","Группа 1"],["Продажа","1","1500","1509","","","","","","2022-07-18","Да","2022-07-18T11:21","","3","Нет","Да","123","Да","Группа 1"],["Услуга 2","2","1800","1809","","","","","","2022-07-18","Да","2022-07-18T11:21","","3","Нет","Да","123","Да","Группа 1"],["Услуга 3","3","13","19","","","","","","2022-07-18","Да","2022-07-18T11:21","","3","Нет","Да","123","Да","Группа 1"],["Услуга 1","1","1500","1509","","","","","","2022-07-18","Да","2022-07-18T11:21","","3","Нет","Да","1234","Да","Группа 2"],["Услуга 1","1","1500","1509","","","","","","2022-07-18","Да","2022-07-18T11:21","","3","Нет","Да","123","Да","Группа 2"]],types:[{name:"Число целое",value:1},{name:"Дробное число",value:2},{name:"Строка",value:3},{name:"Текст",value:4},{name:"Список",value:5},{name:"Мильтисписок",value:6},{name:"Дата",value:7},{name:"Дата-Время",value:8},{name:"Флаг",value:9}],fields:[{id:1,field:"Название",type:{name:"Строка",value:3},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0},{id:2,field:"Артикул",type:{name:"Строка",value:3},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0},{id:3,field:"Себестоимость",type:{name:"Дробное число",value:2},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0},{id:4,field:"Цена",type:{name:"Дробное число",value:2},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0},{id:5,field:"Склад",type:{name:"Список",value:5},selector_options:[{name:"Не выбрано",value:1},{name:"Склад 1",value:2},{name:"Склад 2",value:3}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!1},{id:6,field:"На складе",type:{name:"Число целое",value:1},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!1},{id:7,field:"Свободно для резерва",type:{name:"Число целое",value:1},selector_options:[{name:"",value:1}],disable_change_type:!1,visibility:!0,edit:!1,editing:!1,delete:!0,available_to_services:!1},{id:8,field:"В резерве",type:{name:"Число целое",value:1},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!1},{id:9,field:"№ партии",type:{name:"Число целое",value:1},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!1},{id:10,field:"Поступление",type:{name:"Дата",value:7},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0},{id:11,field:"НДС",type:{name:"Флаг",value:9},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0},{id:12,field:"Изменение",type:{name:"Дата-Время",value:8},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0},{id:13,field:"Единицы измерений",type:{name:"Список",value:5},selector_options:[{name:"Не выбрано",value:1},{name:"шт",value:2},{name:"л (литры)",value:3},{name:"м3 (кубические метры)",value:4},{name:"кг (килограммы)",value:5},{name:"т (тонны)",value:6},{name:"комплект",value:7},{name:"услуга",value:8}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!1},{id:14,field:"НДС %",type:{name:"Дробное число",value:2},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0},{id:15,field:"НДС включен в цену",type:{name:"Флаг",value:9},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0},{id:16,field:"Менеджер может менять % НДС",type:{name:"Флаг",value:9},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0},{id:17,field:"Описание",type:{name:"Текст",value:4},selector_options:[{name:"",value:1}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0},{id:18,field:"Прибыль",type:{name:"Флаг",value:9},selector_options:[{name:"",value:1}],disable_change_type:!1,visibility:!1,edit:!1,editing:!1,delete:!0,available_to_services:!0},{id:19,field:"Группа",type:{name:"Мильтисписок",value:6},selector_options:[{name:"Не выбрано",value:1},{name:"Группа 1",value:2},{name:"Группа 2",value:3},{name:"Группа 3",value:4},{name:"Группа 4",value:5}],disable_change_type:!0,visibility:!0,edit:!1,editing:!1,delete:!1,available_to_services:!0}]},getters:{data(e){return e.data},data1(e){return e.data},get_data_storage(e){const t=e.params.indexOf("Склад")-1,a={};let i=[],l=null;return e.fields.forEach((e=>{"Склад"==e.field&&(l=e.id-1)})),e.fields[l].selector_options.forEach((e=>{i.push(e.name)})),i.shift(),i.forEach((e=>{a[e]=[]})),i.forEach((i=>{e.data.forEach((e=>{e[t]==i&&a[i].push(e)}))})),a},service(e){return e.service},params(e){return e.params},types(e){return e.types},fields(e){return e.fields},options_from_name:e=>{const t={};return e.fields.forEach((e=>{t[e.field]=e.selector_options})),t}},mutations:{update_data(e,t){e.data=t},update_data_idx(e,t){e.data[t.idx]=t.data},update_all_data(e,t){e.data.forEach(((a,i)=>{e.data[i].push(t)}))},add_new_data(e,t){let a=[];e.params.forEach((()=>a.push(""))),a.pop(),a.pop(),t.title.forEach(((i,l)=>{const s=e.params.indexOf(i)-1;s>=0&&(a[s]=t.new_data[l])})),e.data.push(a)},cancel_item_in_data(e,t){const a=e.params.indexOf(t.name)-1,i=e.data[t.idx][a];e.data[t.idx][a]=i-t.count},delete_data_idx(e,t){e.data.forEach(((a,i)=>{t.forEach((t=>{e.data[i].splice(t,1)}))}))},remove_data_idx(e,t){e.data.splice(t.idx,1)},add_data(e,t){e.data.push(t.data)},archive_data(e,t){t.forEach((t=>{e.archive.items.push(e.data[t]),e.archive.sourses.push(0)}));const a=t.reverse();a.forEach((t=>e.data.splice(t,1)))},update_params(e,t){e.params=t},update_fields(e,t){e.fields=t}},actions:{}};function pa(){const e=e=>{let t="";return Object.entries(e).forEach(((e,a)=>{t+=0===a?"?":"&",t+=e[0]+"="+e[1]})),t};return{preparation_params:e}}const{preparation_params:_a}=pa();var ha={state:{categories:[]},getters:{},mutations:{updateCategories(e,t){e.categories=[...t]}},actions:{async getCategories(e,t){ya?.apiRequest("categories",t,(t=>(console.debug(t),e.commit("updateCategories",t),t)))}}};const{preparation_params:va}=pa();var ma={state:{products:[]},getters:{},mutations:{updateProducts(e,t){e.products=[...t]}},actions:{async getProductsAutocomplete(e,t){ya?.apiRequest("get-products-autocomplete",t,(e=>(console.debug(e),e)))},async getProducts(e,t){ya?.apiRequest("products",t,(t=>(console.debug(t),e.commit("updateProducts",t),t)))}}};const{preparation_params:fa}=pa();var ga={state:{fields:[]},getters:{},mutations:{updateFields(e,t){e.fields=[...t]}},actions:{async getFields(e,t){console.debug("production",ya),ya?.apiRequest("fields",t,(t=>(console.debug(t),e.commit("updateFields",t),t)))}}},wa=(0,fe.MT)({modules:{data:ca,categories:ha,products:ma,fields:ga}});(0,i.ri)(ra).use(wa).mount("#test");let ya=null;const ba={render(e){return ya=e,e.showProductsSearch((e=>{const t=(0,i.ri)({render:()=>(0,l.h)(ra)});t.use(wa),t.mount(e)})),e.apiRequest("fields",{category_id:0},(e=>{console.debug(e)})),!0},init(){return!0},bind_actions(){return!0},settings(){},onSave(){},destroy(){},contacts_selected(){},leads_selected(){},tasks_selected(){}};$("body").data("WidgetVueProductsSearch",ba);var ka=ba}},t={};function a(i){var l=t[i];if(void 0!==l)return l.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,i,l,s){if(!i){var n=1/0;for(r=0;r<e.length;r++){i=e[r][0],l=e[r][1],s=e[r][2];for(var o=!0,d=0;d<i.length;d++)(!1&s||n>=s)&&Object.keys(a.O).every((function(e){return a.O[e](i[d])}))?i.splice(d--,1):(o=!1,s<n&&(n=s));if(o){e.splice(r--,1);var u=l();void 0!==u&&(t=u)}}return t}s=s||0;for(var r=e.length;r>0&&e[r-1][2]>s;r--)e[r]=e[r-1];e[r]=[i,l,s]}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={179:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var l,s,n=i[0],o=i[1],d=i[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(l in o)a.o(o,l)&&(a.m[l]=o[l]);if(d)var r=d(a)}for(t&&t(i);u<n.length;u++)s=n[u],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(r)},i=self["webpackChunkwidget_test_3"]=self["webpackChunkwidget_test_3"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(105)}));return i=a.O(i),i}()}));
//# sourceMappingURL=main.js.map